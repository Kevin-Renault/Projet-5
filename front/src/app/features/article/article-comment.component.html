<app-header></app-header>
@if (isPageLoading()) {
<output class="spinner-container" aria-live="polite" aria-busy="true">
    <span class="page-spinner" aria-hidden="true"></span>
</output>
}
@else {
<div class="article-card">
    @if (article(); as article) {
    <div class="article-title">{{ article.title }}</div>
    <div class="article-meta">
        <span class="article-date">{{ article.createdAt | date:'dd/MM/yyyy' }}</span>
        <span class="article-author">{{ authorById(article.authorId) | async }}</span>
        <span class="article-topic">{{ topicById(article.topicId) | async }}</span>
    </div>
    <div class="article-content">
        {{ article.content }}
    </div>
    }
</div>
<hr>
<div>Commentaires :</div><br><br>
<div class="comments-list">
    @for (comment of articleComments(); track comment.id) {
    <div class="comment-title">{{ authorById(comment.authorId) | async }}</div>
    <div class="comment-card">
        <div class="comment-content">{{ comment.content }}</div>
    </div>
    }
</div>

<app-dynamic-form [title]="'Commentaires'" [formElements]="commentFormElements" [submitLabel]="'Sauvegarder'"
    [error]="error()" [isLoading]="isLoading()" [message]="message()" (formSubmit)="onFormSubmit($event)">
</app-dynamic-form>
}